<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Storage Model · PowerModels</title><meta name="title" content="Storage Model · PowerModels"/><meta property="og:title" content="Storage Model · PowerModels"/><meta property="twitter:title" content="Storage Model · PowerModels"/><meta name="description" content="Documentation for PowerModels."/><meta property="og:description" content="Documentation for PowerModels."/><meta property="twitter:description" content="Documentation for PowerModels."/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-367975-10"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-367975-10', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="PowerModels logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">PowerModels</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quickguide/">Getting Started</a></li><li><a class="tocitem" href="../network-data/">Network Data Format</a></li><li><a class="tocitem" href="../result-data/">Result Data Format</a></li><li><a class="tocitem" href="../math-model/">Mathematical Model</a></li><li><a class="tocitem" href="../power-flow/">Power Flow</a></li><li class="is-active"><a class="tocitem" href>Storage Model</a><ul class="internal"><li><a class="tocitem" href="#Storage-Data-Model"><span>Storage Data Model</span></a></li><li><a class="tocitem" href="#Storage-Mathematical-Model"><span>Storage Mathematical Model</span></a></li></ul></li><li><a class="tocitem" href="../switch/">Switch Model</a></li><li><a class="tocitem" href="../multi-networks/">Multi Networks</a></li><li><a class="tocitem" href="../utilities/">Utilities</a></li><li><a class="tocitem" href="../basic-data-utilities/">Basic Data Utilities</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../formulations/">Network Formulations</a></li><li><a class="tocitem" href="../specifications/">Problem Specifications</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Modeling Components</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../model/">PowerModel</a></li><li><a class="tocitem" href="../objective/">Objective</a></li><li><a class="tocitem" href="../variables/">Variables</a></li><li><a class="tocitem" href="../constraints/">Constraints</a></li></ul></li><li><a class="tocitem" href="../relaxations/">Relaxation Schemes</a></li><li><a class="tocitem" href="../parser/">File IO</a></li></ul></li><li><span class="tocitem">Developer</span><ul><li><a class="tocitem" href="../developer/">Developer</a></li><li><a class="tocitem" href="../formulation-details/">Formulation Details</a></li></ul></li><li><a class="tocitem" href="../experiment-results/">Experiment Results</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Storage Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Storage Model</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/lanl-ansi/PowerModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/lanl-ansi/PowerModels.jl/blob/master/docs/src/storage.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="PowerModels&#39;-Storage-Component"><a class="docs-heading-anchor" href="#PowerModels&#39;-Storage-Component">PowerModels&#39; Storage Component</a><a id="PowerModels&#39;-Storage-Component-1"></a><a class="docs-heading-anchor-permalink" href="#PowerModels&#39;-Storage-Component" title="Permalink"></a></h1><p>In addition to the standard transmission network components (e.g. bus, load, generator, branch, ...) PowerModels also includes a generic storage component, which can be configured to model a variety of storage devices.  This section provides a brief overview of the storage component&#39;s data and mathematical model.  The motivations and derivation of this model are discussed in this <a href="https://arxiv.org/abs/2004.14768">technical report</a>.</p><h2 id="Storage-Data-Model"><a class="docs-heading-anchor" href="#Storage-Data-Model">Storage Data Model</a><a id="Storage-Data-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-Data-Model" title="Permalink"></a></h2><p>When parsing a matpower file with storage information, </p><pre><code class="language-julia hljs">data = PowerModels.parse_file(&quot;matpower/case5_strg.m&quot;)</code></pre><p>the storage information can be retrieved via the <code>&quot;storage&quot;</code> keyword in the <code>data</code> dictionary. They will be correspondingly rendered when <code>PowerModels.print_summary(data)</code> or <code>PowerModels.component_table(data, &quot;storage&quot;, &lt;columns&gt;)</code> is called.</p><p>The list of columns for the generic storage model is roughly as follows,</p><pre><code class="language-json hljs">{
  &quot;index&quot;:&lt;int&gt;,
  &quot;storage_bus&quot;:&lt;int&gt;,
  &quot;ps&quot;:&lt;float, MW&gt;,
  &quot;qs&quot;:&lt;float, MVAr&gt;,
  &quot;energy&quot;:&lt;float, MWh&gt;,
  &quot;energy_rating&quot;:&lt;float, MWh&gt;,
  &quot;charge_rating&quot;:&lt;float, MW&gt;,
  &quot;discharge_rating&quot;:&lt;float, MW&gt;,
  &quot;charge_efficiency&quot;:&lt;float&gt;,
  &quot;discharge_efficiency&quot;:&lt;float&gt;,
  (&quot;thermal_rating&quot;:&lt;float, MVA&gt;,)
  (&quot;current_rating&quot;:&lt;float, MA&gt;,)
  &quot;qmin&quot;:&lt;float, MVar&gt;,
  &quot;qmax&quot;:&lt;float, MVar&gt;,
  &quot;r&quot;:&lt;float, p.u.&gt;,
  &quot;x&quot;:&lt;float, p.u.&gt;,
  &quot;p_loss&quot;:&lt;float, MW&gt;,
  &quot;q_loss&quot;:&lt;float, MVar&gt;,
  &quot;status&quot;:&lt;int&gt;,
}</code></pre><p>All of these quantities should be positive except for <code>qmin</code>,<code>p_loss</code> and <code>q_loss</code>, which can be negative.  The <code>efficiency</code> parameters are unit-less scalars in the range of 1.0 and 0.0.  By default, all of these quantities are used in per unit inside PowerModels.  The units indicated here are only used by PowerModels&#39; mixed-unit representation and the extended Matpower network format.</p><p>Note that the optional <code>thermal_rating</code> and <code>current_rating</code> parameters are applied at the point of coupling to the network while the other ratings are internal to the storage device.</p><p>In addition to these component parameters, PowerModels also requires a global parameter <code>time_elapsed</code> (in hours) to specify how active power is converted into units of energy as the storage device is charged or discharged.</p><p>PowerModels&#39; storage components can be added to Matpower data files as follows,</p><pre><code class="language-matlab hljs">% hours
mpc.time_elapsed = 1.0

%% storage data
%   storage_bus ps  qs  energy  energy_rating charge_rating  discharge_rating  charge_efficiency  discharge_efficiency  thermal_rating  qmin  qmax  r  x  p_loss  p_loss  status
mpc.storage = [
   3   0.0  0.0  20.0  100.0   50.0  70.0  0.8   0.9   100.0   -50.0   70.0  0.1   0.0   0.0   0.0   1;
   10  0.0  0.0  30.0  100.0   50.0  70.0  0.9   0.8   100.0   -50.0   70.0  0.1   0.0   0.0   0.0   1;
];</code></pre><p>Note that this Matpower-based format includes the optional <code>thermal_rating</code> parameter.</p><h2 id="Storage-Mathematical-Model"><a class="docs-heading-anchor" href="#Storage-Mathematical-Model">Storage Mathematical Model</a><a id="Storage-Mathematical-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Storage-Mathematical-Model" title="Permalink"></a></h2><p>Given the storage data model and two sequential time points <span>$s$</span> and <span>$t$</span>, the storage component&#39;s mathematical model is given by,</p><p class="math-container">\[\begin{align}
%
\mbox{data: } &amp; \nonumber \\
&amp; e^u \mbox{ - energy rating} \nonumber \\
&amp; sc^u \mbox{ - charge rating} \nonumber \\
&amp; sd^u \mbox{ - discharge rating} \nonumber \\
&amp; \eta^c \mbox{ - charge efficiency} \nonumber \\
&amp; \eta^d \mbox{ - discharge efficiency} \nonumber \\
&amp; te \mbox{ - time elapsed} \nonumber \\
&amp; S^l \mbox{ - power losses} \nonumber \\
&amp; Z \mbox{ - injection impedance} \nonumber \\
&amp; q^l, q^u  \mbox{ - reactive power injection limits} \nonumber \\
&amp; s^u \mbox{ - thermal injection limit} \nonumber \\
&amp; i^u \mbox{ - current injection limit} \nonumber \\
%
\mbox{variables: } &amp; \nonumber \\
&amp; e_i \in (0, e^u) \mbox{ - storage energy at time $i$} \label{var_strg_energy} \\
&amp; sc_i \in (0, sc^u) \mbox{ - charge amount at time $i$} \label{var_strg_charge} \\
&amp; sd_i \in (0, sd^u) \mbox{ - discharge amount at time $i$} \label{var_strg_discharge} \\
&amp; sqc_i \mbox{ - reactive power slack at time $i$} \label{var_strg_qslack} \\
&amp; S_i \mbox{ - complex bus power injection at time $i$} \label{var_strg_power} \\
&amp; I_i \mbox{ - complex bus current injection at time $i$} \label{var_strg_current} \\
%
\mbox{subject to: } &amp; \nonumber \\
&amp; e_t - e_s = te \left(\eta^c sc_t - \frac{sd_t}{\eta^d} \right) \label{eq_strg_energy} \\
&amp; sc_t \cdot sd_t = 0 \label{eq_strg_compl} \\
&amp; S_t + (sd_t - sc_t) = j \cdot sqc_t + S^l + Z |I_t|^2 \label{eq_strg_loss} \\
&amp; q^l \leq \Im(S_t) \leq q^u \label{eq_strg_q_limit} \\
&amp; |S_t| \leq s^u \label{eq_strg_thermal_limit} \\
&amp; |I_t| \leq i^u \label{eq_strg_current_limit}
\end{align}\]</p><h3 id="Mapping-to-PowerModels-Functions"><a class="docs-heading-anchor" href="#Mapping-to-PowerModels-Functions">Mapping to PowerModels Functions</a><a id="Mapping-to-PowerModels-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Mapping-to-PowerModels-Functions" title="Permalink"></a></h3><ul><li>Eq. <span>$\eqref{var_strg_energy}$</span> - <a href="../variables/#PowerModels.variable_storage_energy-Tuple{AbstractPowerModel}"><code>variable_storage_energy</code></a></li><li>Eq. <span>$\eqref{var_strg_charge}$</span> - <a href="../variables/#PowerModels.variable_storage_charge-Tuple{AbstractPowerModel}"><code>variable_storage_charge</code></a></li><li>Eq. <span>$\eqref{var_strg_discharge}$</span> - <a href="../variables/#PowerModels.variable_storage_discharge-Tuple{AbstractPowerModel}"><code>variable_storage_discharge</code></a></li><li>Eq. <span>$\eqref{var_strg_qslack}$</span> - <a href="../variables/#PowerModels.variable_storage_power_control_imaginary-Tuple{AbstractPowerModel}"><code>variable_storage_power_control_imaginary</code></a></li><li>Eq. <span>$\eqref{var_strg_power}$</span> - <a href="../variables/#PowerModels.variable_storage_power-Tuple{AbstractPowerModel}"><code>variable_storage_power</code></a></li><li>Eq. <span>$\eqref{var_strg_current}$</span> - implemented as a function of other variables</li><li>Eq. <span>$\eqref{eq_strg_energy}$</span> - <a href="../constraints/#PowerModels.constraint_storage_state"><code>constraint_storage_state</code></a></li><li>Eq. <span>$\eqref{eq_strg_compl}$</span> - <a href="../constraints/#PowerModels.constraint_storage_complementarity_nl"><code>constraint_storage_complementarity_nl</code></a> or <a href="../constraints/#PowerModels.constraint_storage_complementarity_mi"><code>constraint_storage_complementarity_mi</code></a></li><li>Eq. <span>$\eqref{eq_strg_loss}$</span> - <a href="../constraints/#PowerModels.constraint_storage_losses"><code>constraint_storage_losses</code></a></li><li>Eq. <span>$\eqref{eq_strg_q_limit}$</span> - bounds of <a href="../variables/#PowerModels.variable_storage_power-Tuple{AbstractPowerModel}"><code>variable_storage_power</code></a></li><li>Eq. <span>$\eqref{eq_strg_thermal_limit}$</span> - <a href="../constraints/#PowerModels.constraint_storage_thermal_limit"><code>constraint_storage_thermal_limit</code></a></li><li>Eq. <span>$\eqref{eq_strg_current_limit}$</span> - <a href="../constraints/#PowerModels.constraint_storage_current_limit"><code>constraint_storage_current_limit</code></a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../power-flow/">« Power Flow</a><a class="docs-footer-nextpage" href="../switch/">Switch Model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Tuesday 4 March 2025 19:34">Tuesday 4 March 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
