<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Developer · PowerModels</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-367975-10', 'auto');
ga('send', 'pageview');
</script><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>PowerModels</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../quickguide/">Getting Started</a></li><li><a class="toctext" href="../network-data/">Network Data Format</a></li><li><a class="toctext" href="../result-data/">Result Data Format</a></li><li><a class="toctext" href="../math-model/">Mathematical Model</a></li><li><a class="toctext" href="../storage/">Storage Model</a></li><li><a class="toctext" href="../multi-networks/">Multi Networks</a></li><li><a class="toctext" href="../utilities/">Utilities</a></li></ul></li><li><span class="toctext">Library</span><ul><li><a class="toctext" href="../formulations/">Network Formulations</a></li><li><a class="toctext" href="../specifications/">Problem Specifications</a></li><li><span class="toctext">Modeling Components</span><ul><li><a class="toctext" href="../model/">PowerModel</a></li><li><a class="toctext" href="../objective/">Objective</a></li><li><a class="toctext" href="../variables/">Variables</a></li><li><a class="toctext" href="../constraints/">Constraints</a></li></ul></li><li><a class="toctext" href="../relaxations/">Relaxation Schemes</a></li><li><a class="toctext" href="../parser/">File IO</a></li></ul></li><li><span class="toctext">Developer</span><ul><li class="current"><a class="toctext" href>Developer</a><ul class="internal"><li><a class="toctext" href="#Function-Naming-Guidelines-1">Function Naming Guidelines</a></li><li><a class="toctext" href="#Variable-and-Parameter-Naming-Guidelines-1">Variable and Parameter Naming Guidelines</a></li><li><a class="toctext" href="#DistFlow-derivation-1">DistFlow derivation</a></li></ul></li><li><a class="toctext" href="../formulation-details/">Formulation Details</a></li></ul></li><li><a class="toctext" href="../experiment-results/">Experiment Results</a></li></ul></nav><article id="docs"><header><nav><ul><li>Developer</li><li><a href>Developer</a></li></ul><a class="edit-page" href="https://github.com/lanl-ansi/PowerModels.jl/blob/master/docs/src/developer.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Developer</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Developer-Documentation-1" href="#Developer-Documentation-1">Developer Documentation</a></h1><h2><a class="nav-anchor" id="Function-Naming-Guidelines-1" href="#Function-Naming-Guidelines-1">Function Naming Guidelines</a></h2><p>Following the Julia style guidelines, functions that mutate arguments should end with <code>!</code>.  Following the JuMP style guidelines functions beginning with an <code>_</code> are intended for internal package use only (i.e. similar private  scope functions).  Underscores are used to separate multi-word function names and the words should typically be ordered from general to more specific, so that alphabetical sorting clusters similar functions together.</p><h2><a class="nav-anchor" id="Variable-and-Parameter-Naming-Guidelines-1" href="#Variable-and-Parameter-Naming-Guidelines-1">Variable and Parameter Naming Guidelines</a></h2><h3><a class="nav-anchor" id="Suffixes-1" href="#Suffixes-1">Suffixes</a></h3><ul><li><code>_fr</code>: from-side (&#39;i&#39;-node)</li><li><code>_to</code>: to-side (&#39;j&#39;-node)</li></ul><h3><a class="nav-anchor" id="Power-1" href="#Power-1">Power</a></h3><p>Defining power <span>$s = p + j \cdot q$</span> and <span>$sm = |s|$</span></p><ul><li><code>s</code>: complex power (VA)</li><li><code>sm</code>: apparent power (VA)</li><li><code>p</code>: active power (W)</li><li><code>q</code>: reactive power (var)</li></ul><h3><a class="nav-anchor" id="Voltage-1" href="#Voltage-1">Voltage</a></h3><p>Defining voltage <span>$v = vm \angle va = vr + j \cdot vi$</span>:</p><ul><li><code>vm</code>: magnitude of (complex) voltage (V)</li><li><code>va</code>: angle of complex voltage (rad)</li><li><code>vr</code>: real part of (complex) voltage (V)</li><li><code>vi</code>: imaginary part of complex voltage (V)</li></ul><h3><a class="nav-anchor" id="Current-1" href="#Current-1">Current</a></h3><p>Defining current <span>$c = cm \angle ca = cr + j \cdot ci$</span>:</p><ul><li><code>cm</code>: magnitude of (complex) current (A)</li><li><code>ca</code>: angle of complex current (rad)</li><li><code>cr</code>: real part of (complex) current (A)</li><li><code>ci</code>: imaginary part of complex current (A)</li></ul><h3><a class="nav-anchor" id="Voltage-products-1" href="#Voltage-products-1">Voltage products</a></h3><p>Defining voltage product <span>$w = v_i \cdot v_j$</span> then <span>$w = wm \angle wa = wr + j\cdot wi$</span>:</p><ul><li><code>wm</code> (short for vvm): magnitude of (complex) voltage products (V<span>$^2$</span>)</li><li><code>wa</code> (short for vva): angle of complex voltage products (rad)</li><li><code>wr</code> (short for vvr): real part of (complex) voltage products (V<span>$^2$</span>)</li><li><code>wi</code> (short for vvi): imaginary part of complex voltage products (V<span>$^2$</span>)</li></ul><h3><a class="nav-anchor" id="Current-products-1" href="#Current-products-1">Current products</a></h3><p>Defining current product <span>$cc = c_i \cdot c_j$</span> then <span>$cc = ccm \angle cca = ccr + j\cdot cci$</span>:</p><ul><li><code>ccm</code>: magnitude of (complex) current products (A<span>$^2$</span>)</li><li><code>cca</code>: angle of complex current products (rad)</li><li><code>ccr</code>: real part of (complex) current products (A<span>$^2$</span>)</li><li><code>cci</code>: imaginary part of complex current products (A<span>$^2$</span>)</li></ul><h3><a class="nav-anchor" id="Transformer-ratio-1" href="#Transformer-ratio-1">Transformer ratio</a></h3><p>Defining complex transformer ratio <span>$t = tm \angle ta = tr + j\cdot ti$</span>:</p><ul><li><code>tm</code>: magnitude of (complex) transformer ratio (-)</li><li><code>ta</code>: angle of complex transformer ratio (rad)</li><li><code>tr</code>: real part of (complex) transformer ratio (-)</li><li><code>ti</code>: imaginary part of complex transformer ratio (-)</li></ul><h3><a class="nav-anchor" id="Impedance-1" href="#Impedance-1">Impedance</a></h3><p>Defining impedance <span>$z = r + j\cdot x$</span>:</p><ul><li><code>r</code>: resistance (<span>$\Omega$</span>)</li><li><code>x</code>: reactance (<span>$\Omega$</span>)</li></ul><h3><a class="nav-anchor" id="Admittance-1" href="#Admittance-1">Admittance</a></h3><p>Defining admittance <span>$y = g + j\cdot b$</span>:</p><ul><li><code>g</code>: conductance (<span>$S$</span>)</li><li><code>b</code>: susceptance (<span>$S$</span>)</li></ul><h3><a class="nav-anchor" id="Standard-Value-Names-1" href="#Standard-Value-Names-1">Standard Value Names</a></h3><ul><li>network ids:<code>network</code>, <code>nw</code>, <code>n</code></li><li>conductors ids: <code>conductor</code>, <code>cnd</code>, <code>c</code></li><li>phase ids: <code>phase</code>, <code>ph</code>, <code>h</code></li></ul><h2><a class="nav-anchor" id="DistFlow-derivation-1" href="#DistFlow-derivation-1">DistFlow derivation</a></h2><h3><a class="nav-anchor" id="For-an-asymmetric-pi-section-1" href="#For-an-asymmetric-pi-section-1">For an asymmetric pi section</a></h3><p>Following notation of <a href="#footnote-1">[1]</a>, but recognizing it derives the SOC BFM without shunts. In a pi-section, part of the total current <span>$I_{lij}$</span> at the from side flows through the series impedance, <span>$I^{s}_{lij}$</span>, part of it flows through the from side shunt admittance <span>$I^{sh}_{lij}$</span>. Vice versa for the to-side. Indicated by superscripts &#39;s&#39; (series) and &#39;sh&#39; (shunt).</p><ul><li>Ohm&#39;s law: <span>$U^{mag}_{j} \angle \theta_{j} = U^{mag}_{i}\angle \theta_{i}  - z^{s}_{lij} \cdot I^{s}_{lij}$</span> <span>$\forall lij$</span></li><li>KCL at shunts: $ I<em>{lij} = I^{s}</em>{lij} + I^{sh}<em>{lij}$, $ I</em>{lji} = I^{s}<em>{lji} + I^{sh}</em>{lji} $</li><li>Observing: <span>$I^{s}_{lij} = - I^{s}_{lji}$</span>, $ \vert I^{s}<em>{lij} \vert = \vert I^{s}</em>{lji} \vert $</li><li>Ohm&#39;s law times its own complex conjugate: <span>$(U^{mag}_{j})^2 = (U^{mag}_{i}\angle \theta_{i}  - z^{s}_{lij} \cdot I^{s}_{lij})\cdot (U^{mag}_{i}\angle \theta_{i}  - z^{s}_{lij} \cdot I^{s}_{lij})^*$</span></li><li>Defining <span>$S^{s}_{lij} = P^{s}_{lij} + j\cdot Q^{s}_{lij} = (U^{mag}_{i}\angle \theta_{i}) \cdot (I^{s}_{lij})^*$</span></li><li>Working it out <span>$(U^{mag}_{j})^2 = (U^{mag}_{i})^2 - 2 \cdot(r^{s}_{lij} \cdot P^{s}_{lij} + x^{s}_{lij} \cdot Q^{s}_{lij}) $ + $((r^{s}_{lij})^2 + (x^{s}_{lij})^2)\vert I^{s}_{lij} \vert^2$</span></li></ul><p>Power flow balance w.r.t. branch <em>total</em> losses</p><ul><li>Active power flow:   <span>$P_{lij}$</span> + $ P<em>{lji} $ = $  g^{sh}</em>{lij} \cdot (U^{mag}<em>{i})^2 + r^{s}</em>{l} \cdot \vert I^{s}<em>{lij} \vert^2 +  g^{sh}</em>{lji} \cdot  (U^{mag}_{j})^2 $</li><li>Reactive power flow: <span>$Q_{lij}$</span> + $ Q<em>{lji} $ = $ -b^{sh}</em>{lij} \cdot (U^{mag}<em>{i})^2 + x^{s}</em>{l} \cdot \vert I^{s}<em>{lij} \vert^2  - b^{sh}</em>{lji} \cdot  (U^{mag}_{j})^2 $</li><li>Current definition: $ \vert S^{s}<em>{lij} \vert^2  $ $=(U^{mag}</em>{i})^2 \cdot \vert I^{s}_{lij} \vert^2 $</li></ul><p>Substitution:</p><ul><li>Voltage from: <span>$(U^{mag}_{i})^2 \rightarrow w_{i}$</span></li><li>Voltage to: <span>$(U^{mag}_{j})^2 \rightarrow w_{j}$</span></li><li>Series current : <span>$\vert I^{s}_{lij} \vert^2 \rightarrow l^{s}_{l}$</span></li></ul><p>Note that <span>$l^{s}_{l}$</span> represents squared magnitude of the <em>series</em> current, i.e. the current flow through the series impedance in the pi-model.</p><p>Power flow balance w.r.t. branch <em>total</em> losses</p><ul><li>Active power flow:   <span>$P_{lij}$</span> + $ P<em>{lji} $ = $  g^{sh}</em>{lij} \cdot w<em>{i} + r^{s}</em>{l} \cdot l^{s}<em>{l} +  g^{sh}</em>{lji} \cdot  w_{j} $</li><li>Reactive power flow: <span>$Q_{lij}$</span> + $ Q<em>{lji} $ = $ -b^{sh}</em>{lij} \cdot w<em>{i} + x^{s}</em>{l} \cdot l^{s}<em>{l}  - b^{sh}</em>{lji} \cdot  w_{j} $</li></ul><p>Power flow balance w.r.t. branch <em>series</em> losses:</p><ul><li>Series active power flow : <span>$P^{s}_{lij} + P^{s}_{lji}$</span> $ = r^{s}<em>{l} \cdot l^{s}</em>{l} $</li><li>Series reactive power flow: <span>$Q^{s}_{lij} + Q^{s}_{lji}$</span> $ = x^{s}<em>{l} \cdot l^{s}</em>{l} $</li></ul><p>Valid equality to link <span>$w_{i}, l_{lij}, P^{s}_{lij}, Q^{s}_{lij}$</span>:</p><ul><li>Nonconvex current definition: <span>$(P^{s}_{lij})^2$</span> + <span>$(Q^{s}_{lij})^2$</span>  $=w<em>{i} \cdot l</em>{lij} $</li><li>SOC current definition: <span>$(P^{s}_{lij})^2$</span> + <span>$(Q^{s}_{lij})^2$</span>  <span>$\leq$</span> $ w<em>{i} \cdot l</em>{lij} $</li></ul><h3><a class="nav-anchor" id="Adding-an-ideal-transformer-1" href="#Adding-an-ideal-transformer-1">Adding an ideal transformer</a></h3><p>Adding an ideal transformer at the from side implicitly creates an internal branch voltage, between the transformer and the pi-section.</p><ul><li>new voltage: <span>$w^{&#39;}_{l}$</span></li><li>ideal voltage magnitude transformer: <span>$w^{&#39;}_{l} = \frac{w_{i}}{(t^{mag})^2}$</span></li></ul><p>W.r.t to the pi-section only formulation, we effectively perform the following substitution in all the equations above:</p><ul><li>$ w<em>{i} \rightarrow \frac{w</em>{i}}{(t^{mag})^2}$</li></ul><p>The branch&#39;s power balance isn&#39;t otherwise impacted by adding the ideal transformer, as such transformer is lossless.</p><h3><a class="nav-anchor" id="Adding-total-current-limits-1" href="#Adding-total-current-limits-1">Adding total current limits</a></h3><ul><li>Total current from: $ \vert I<em>{lij} \vert \leq I^{rated}</em>{l}$</li><li>Total current to: $ \vert I<em>{lji} \vert \leq I^{rated}</em>{l}$</li></ul><p>In squared voltage magnitude variables:</p><ul><li>Total current from: $ (P<em>{lij})^2$ + $(Expr(:incomplete, &quot;incomplete: premature end of input&quot;))</em>{lij})^2  \leq (I^{rated}<em>{l})^2 \cdot  w</em>{i}$</li><li>Total current to: $ (P<em>{lji})^2$ + $(Expr(:incomplete, &quot;incomplete: premature end of input&quot;))</em>{lji})^2  \leq (I^{rated}<em>{l})^2 \cdot w</em>{j}$</li></ul><p><a href="#footnote-1">[1]</a> Gan, L., Li, N., Topcu, U., &amp; Low, S. (2012). Branch flow model for radial networks: convex relaxation. 51st IEEE Conference on Decision and Control, 1–8. Retrieved from http://smart.caltech.edu/papers/ExactRelaxation.pdf</p><footer><hr/><a class="previous" href="../parser/"><span class="direction">Previous</span><span class="title">File IO</span></a><a class="next" href="../formulation-details/"><span class="direction">Next</span><span class="title">Formulation Details</span></a></footer></article></body></html>
